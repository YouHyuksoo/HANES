# 인터락 구현을 위한 역질문서

> **목적**: `04-프로세스.md`에 인터락 조건이 나열되어 있으나, 구체적인 구현 방식이 미정의 상태입니다.
> 아래 질문에 대한 답변을 통해 인터락 시스템의 설계 방향을 확정합니다.
>
> **작성일**: 2026-02-23
> **회신 요청**: 해당 항목에 체크(v) 또는 기재 후 회신

---

## 1. 인터락 차단 수준

인터락이 발동되었을 때, 작업을 어떤 수준으로 막을 것인가?

### Q1-1. 기본 차단 수준 선택

| 방식 | 동작 설명 | 화면 예시 | 선택 시 사전요구사항 |
|------|----------|----------|-------------------|
| **A. Hard Block** | 조건 미충족 시 작업 진행 불가. 버튼 비활성화, 서버에서도 API 거부 | 작업자가 "실적등록" 버튼을 눌러도 비활성화 상태. 화면에 "설비 일상점검을 먼저 완료하세요" 안내 표시 | 없음 (기본 구현) |
| **B. Soft Block** | 경고 팝업 표시 후, 권한자 승인으로 우회 가능 | 팝업: "설비점검 미실시 상태입니다. 관리자 승인 후 진행하시겠습니까?" → 관리자 ID/PW 입력 → 진행 | **승인 권한 체계 필요** (어떤 직급/역할이 우회 승인 가능한지), **승인 UI 개발**, **우회 사유 입력란** |
| **C. Warning Only** | 경고 표시만 하고 작업은 허용. 이력만 남김 | 화면 상단에 노란 경고 배너: "주의: 부품 사용횟수 초과 (12,340/10,000)" 표시되지만 작업 가능 | **이력 테이블 필요** (누가 언제 경고를 무시하고 작업했는지 기록) |

- [ ] A. Hard Block
- [ ] B. Soft Block
- [ ] C. Warning Only
- [ ] 기타: _______________

---

### Q1-2. 인터락 조건별로 차단 수준을 다르게 가져갈 것인가?

> **예시**: "설비점검 미실시"는 Hard Block, "부품 사용횟수 초과"는 Soft Block, "공정순서 미일치"는 Warning Only 등

- [ ] **동일** — 모든 인터락에 같은 차단 수준 적용
- [ ] **조건별 차등** — 인터락 종류마다 차단 수준을 다르게 설정

> **"조건별 차등" 선택 시 사전요구사항**:
> - 인터락 유형별 차단 수준 매핑 테이블 필요 (DB 또는 설정 파일)
> - 아래 3장의 각 인터락 조건마다 차단 수준을 별도 지정해주셔야 합니다

---

### Q1-3. Soft Block 우회 승인 방식 (Q1-1 또는 Q1-2에서 Soft Block 선택 시)

| 방식 | 화면 예시 | 선택 시 사전요구사항 |
|------|----------|-------------------|
| **관리자 ID/PW 입력** | 팝업에 ID, 비밀번호 입력란 표시 → 로그인 검증 → 승인 권한 확인 | **승인 가능 역할(Role) 정의 필요** (예: ADMIN, SUPERVISOR만 가능) |
| **관리자 QR 스캔** | 팝업에 "관리자 QR을 스캔하세요" 표시 → QR 인식 → 승인 | **관리자 QR 카드 발급 필요**, **PC에 QR 리더기(또는 바코드 스캐너) 설치 필요** |
| **관리자 사번 입력** | 팝업에 관리자 사번 입력란 → 사번 유효성 확인 → 승인 | **작업자마스터에 승인권한 플래그 추가 필요** |

- [ ] 관리자 ID/PW 입력
- [ ] 관리자 QR 스캔
- [ ] 관리자 사번 입력
- [ ] 기타: _______________

---

## 2. 인터락 체크 시점

### Q2-1. 인터락을 언제 체크하는가?

> **현재 생산실적 입력 흐름**: 라인 선택 → 공정 선택 → 설비 선택 → 작업지시 선택 → 작업자 선택 → 실적입력 모달

| 시점 | 화면 예시 | 선택 시 사전요구사항 |
|------|----------|-------------------|
| **A. 설비 선택 시** | 작업자가 설비 카드를 클릭 → 인터락 체크 → 미충족 시 "이 설비는 사용 불가" 메시지, 카드 비활성화 | 없음 (프론트에서 설비 선택 API에 인터락 체크 추가) |
| **B. 작업시작 버튼 클릭 시** | 5단계 선택 완료 후 "작업시작" 클릭 → 서버에서 인터락 체크 → 미충족 시 에러 팝업 | 없음 (API 단에서 검증 로직 추가) |
| **C. 실적 저장(등록) 시** | 수량 입력 후 "등록" 클릭 → 서버에서 인터락 체크 → 미충족 시 저장 거부 | 없음 (API 단에서 검증 로직 추가) |
| **D. 설비 가동 신호 전송 직전** | MES → 설비로 가동 명령 전송 전에 인터락 체크 → 미충족 시 가동 명령 미전송 | **설비 통신 연동이 먼저 완료**되어야 함. 설비 업체와 프로토콜 확정 필요 |

- [ ] A. 설비 선택 시
- [ ] B. 작업시작 버튼 클릭 시
- [ ] C. 실적 저장(등록) 시
- [ ] D. 설비 가동 신호 전송 직전
- [ ] 복수 시점 (예: A+C 조합): _______________

---

### Q2-2. 실시간 감시가 필요한가?

| 방식 | 동작 설명 | 선택 시 사전요구사항 |
|------|----------|-------------------|
| **시점 체크** | 위 Q2-1에서 선택한 시점에만 1회 체크 | 없음 |
| **실시간 폴링** | 화면에 진입하면 N초마다 서버에 인터락 상태를 조회하여 화면에 반영 | **서버 부하 고려 필요** (설비 수 x 폴링 주기). 화면에 인터락 상태 표시 영역 필요 |

- [ ] 시점 체크만으로 충분
- [ ] 실시간 폴링 필요 → 주기: ___초

---

## 3. 인터락 조건별 세부 정의

---

### 3-1. 설비 일상점검 미실시

> **관련 공정**: 와이어절단, 편조체절단, 압착, 초음파융착, 통합검사
> **현재 구현 상태**: 설비 일상점검 CRUD 완구현 (EQUIP_INSPECT_LOGS 테이블에 점검 기록 저장 중)

#### Q3-1-1. "점검 완료"의 판단 기준은?

| 기준 | 예시 | 선택 시 사전요구사항 |
|------|------|-------------------|
| **당일 기준** | 오늘(2026-02-23) 해당 설비에 대한 점검 기록이 1건 이상 존재하면 통과 | **점검 기준 시각 정의 필요** (자정 기준? 교대 시작시각 기준?) |
| **교대(Shift) 기준** | 현재 교대조의 점검 기록이 존재하면 통과 (주간조 08:00~20:00, 야간조 20:00~08:00) | **교대 스케줄 마스터 필요** (교대 시작/종료 시간, 교대 그룹). 현재 미구현 |
| **최근 N시간 이내** | 현재 시각 기준 N시간 이내에 점검 기록이 있으면 통과 | **N값 정의 필요**. N = ___시간 |

- [ ] 당일 기준 → 기준 시각: ___시
- [ ] 교대(Shift) 기준
- [ ] 최근 N시간 이내 → N = ___시간
- [ ] 기타: _______________

#### Q3-1-2. 점검 결과가 "불합격"인 경우는?

| 처리 | 예시 | 선택 시 사전요구사항 |
|------|------|-------------------|
| **합격만 인정** | 점검을 했더라도 결과가 FAIL이면 인터락 발동 유지 | 없음 (현재 점검결과에 PASS/FAIL 필드 존재) |
| **실시 자체로 인정** | 점검 기록만 있으면 결과 무관하게 통과 | 없음 |
| **불합격 시 후속 조치 완료 후 인정** | FAIL → 수리/조치 → 재점검 PASS → 인터락 해제 | **후속 조치 기록 테이블 또는 필드 추가 필요** |

- [ ] 합격(PASS)만 인정
- [ ] 실시 자체로 인정
- [ ] 불합격 시 후속 조치 완료 후 인정
- [ ] 기타: _______________

---

### 3-2. 설비부품(소모품) 사용제한 횟수 초과

> **관련 공정**: 와이어절단, 편조체절단, 압착, 초음파융착, 통합검사
> **현재 구현 상태**: 소모품마스터에 `expectedLife`(예상수명), `currentCount`(현재사용횟수), `status`(NORMAL/WARNING/REPLACE) 관리 중

#### Q3-2-1. 소모품 상태별 처리는?

| 상태 | 의미 | 처리 방식 선택 |
|------|------|-------------|
| **NORMAL** | currentCount < expectedLife × 80% | 정상 통과 |
| **WARNING** | currentCount >= expectedLife × 80% | [ ] 경고만 / [ ] 차단 |
| **REPLACE** | currentCount >= expectedLife | [ ] 경고만 / [ ] 차단 |

> **주의**: WARNING/REPLACE 임계 비율(80%)을 변경 가능하게 할 것인지도 확인 필요 (Q6-2 참조)

#### Q3-2-2. 사용횟수 카운트 방식은?

| 방식 | 동작 설명 | 선택 시 사전요구사항 |
|------|----------|-------------------|
| **생산실적 등록 시 자동 +1** | 작업자가 실적을 등록하면 해당 설비에 장착된 소모품의 currentCount를 +1 | **설비-소모품 장착 매핑이 정확해야 함** (현재 ConsumableMountLog로 관리 중). 어떤 소모품을 +1할지 자동 판별 로직 필요 |
| **생산실적 등록 시 +생산수량** | 양품 + 불량 합계만큼 카운트 증가 | 위와 동일 |
| **설비 가동 데이터에서 자동 수집** | 설비가 1회 동작할 때마다 MES로 카운트 신호 전송 | **설비 통신 연동 필수**. 설비에서 카운트 신호를 보내는 프로토콜 확정 필요 |
| **작업자 수동 입력** | 작업자가 교대 종료 시 사용횟수를 직접 입력 | **수동 입력 화면 추가 필요**. 정확도 이슈 있을 수 있음 |

- [ ] 생산실적 등록 시 자동 +1
- [ ] 생산실적 등록 시 +생산수량
- [ ] 설비 가동 데이터에서 자동 수집
- [ ] 작업자 수동 입력
- [ ] 기타: _______________

#### Q3-2-3. 소모품 교체 후 카운트 리셋은 누가 하는가?

| 방식 | 선택 시 사전요구사항 |
|------|-------------------|
| **설비 담당자가 소모품 관리 화면에서 교체 등록** | 없음 (현재 소모품 관리 화면 존재) |
| **작업자가 현장에서 QR 스캔으로 교체 등록** | **소모품에 QR 코드 부착 필요**, **현장용 교체 등록 화면 추가 필요** |

- [ ] 설비 담당자가 관리 화면에서
- [ ] 작업자가 QR 스캔으로
- [ ] 기타: _______________

---

### 3-3. 자재 미일치

> **관련 공정**: 와이어절단, 준비공정, 압착, 부자재삽입, 조립, 통합검사
> **현재 구현 상태**: BOM마스터에 품목-자재 매핑 존재. 자재 LOT 관리 구현됨. 생산실적 입력 시 자재 확인 기능은 미구현

#### Q3-3-1. "자재 일치"의 검증 범위는?

| 검증 수준 | 예시 | 선택 시 사전요구사항 |
|----------|------|-------------------|
| **품번만 일치** | BOM에 "WIRE-001" 필요 → 투입 자재가 "WIRE-001"이면 통과 | **자재 투입 기록 기능 추가 필요** (현재 생산실적 입력에 자재 투입 필드 없음) |
| **품번 + LOT** | 위 조건 + LOT 번호까지 기록하여 추적 가능하게 | 위 + **LOT 선택/입력 UI 추가 필요** |
| **품번 + LOT + 유효기한** | 위 조건 + 유효기한 만료 자재는 차단 | 위 + **유효기한 체크 로직 추가** (ShelfLife 모듈 연동) |
| **품번 + LOT + 유효기한 + 수량** | 위 조건 + BOM 기준 수량 대비 초과 투입 차단 | 위 + **수량 비교 로직 추가**, 재고 차감 자동화 |

- [ ] 품번만 일치
- [ ] 품번 + LOT
- [ ] 품번 + LOT + 유효기한
- [ ] 품번 + LOT + 유효기한 + 수량
- [ ] 기타: _______________

#### Q3-3-2. 자재 확인 방법은?

| 방법 | 화면 예시 | 선택 시 사전요구사항 |
|------|----------|-------------------|
| **바코드 스캔** | 실적 입력 전 "자재 바코드를 스캔하세요" → 스캐너로 자재 라벨 스캔 → 품번 자동 매칭 | **모든 자재 LOT에 바코드 라벨이 부착**되어 있어야 함. **각 PC에 바코드 스캐너 설치 필요**. **자재 라벨 발행 프로세스 확립 필요** |
| **드롭다운 선택** | 화면에 BOM 기준 필요 자재 목록 표시 → 작업자가 현재 사용 중인 LOT를 선택 | **불출된 자재 LOT 목록 조회 API 필요** (현재 자재불출 데이터와 연동) |
| **수동 품번 입력** | 작업자가 자재 품번 또는 LOT 번호를 직접 타이핑 | **입력 오류 가능성 높음**. 유효성 검증 로직 필요 |

- [ ] 바코드 스캔
- [ ] 드롭다운 선택
- [ ] 수동 품번 입력
- [ ] 복합 (예: 바코드 우선, 수동 보조): _______________

---

### 3-4. 공정순서 미일치

> **관련 공정**: 편조체절단, 준비공정, 압착, 부자재삽입, 단자검사, 조립, 통합검사, 외관검사, 제품포장
> **현재 구현 상태**: ProcessMap(라우팅)에 품목별 공정순서(seq) 정의됨. 생산실적에 공정코드 기록됨. 순서 검증 로직은 미구현

#### Q3-4-1. 공정순서 검증 기준은?

| 기준 | 예시 | 선택 시 사전요구사항 |
|------|------|-------------------|
| **직전 공정만 확인** | 현재 공정이 seq=3이면, seq=2의 실적이 존재하면 통과 | **생산실적에서 시리얼(LOT)별 공정 이력 조회 로직 필요** |
| **모든 선행 공정 확인** | 현재 공정이 seq=3이면, seq=1, seq=2 모두 실적이 있어야 통과 | 위와 동일 + 누적 검증 |
| **라우팅 기준 자동 판단** | ProcessMap의 seq 순서를 기준으로 자동으로 선행 공정 목록 도출 → 실적 존재 여부 확인 | 위와 동일. **ProcessMap 데이터가 모든 품목에 대해 정확히 등록**되어 있어야 함 |

- [ ] 직전 공정만 확인
- [ ] 모든 선행 공정 확인
- [ ] 기타: _______________

#### Q3-4-2. 공정 건너뛰기(Skip) 허용 여부는?

| 방식 | 예시 | 선택 시 사전요구사항 |
|------|------|-------------------|
| **절대 불가** | 어떤 경우에도 선행 공정 없이 진행 불가 | 없음 |
| **관리자 승인 시 가능** | 특수 상황에서 관리자 승인 후 공정 건너뛰기 허용 | **Q1-3의 승인 방식 적용**. 건너뛴 사유 기록 필요 |
| **모델에 따라 선택적** | 특정 모델은 일부 공정이 없음 (예: 단순 모델은 준비공정 생략) | **ProcessMap에서 "필수/선택" 구분 필드 추가 필요**. 또는 모델별 라우팅을 별도 관리 |

- [ ] 절대 불가
- [ ] 관리자 승인 시 가능
- [ ] 모델에 따라 선택적
- [ ] 기타: _______________

---

### 3-5. 샘플검사 양품조건 미충족

> **관련 공정**: 압착(육각), 압착/초음파융착
> **현재 구현 상태**: SampleInspectResult 엔티티 존재. 샘플검사 이력 조회/입력 기능 있음

#### Q3-5-1. 샘플검사 유효 범위는?

| 범위 | 예시 | 선택 시 사전요구사항 |
|------|------|-------------------|
| **작업지시 시작 시 1회** | 작업지시 JO-001 시작 전 샘플검사 1회 합격 → JO-001 전체 기간 유효 | **샘플검사 결과와 작업지시 연결 필요** (현재 SampleInspectResult에 jobOrderId 있는지 확인 필요) |
| **교대마다 재실시** | 주간→야간 교대 시 샘플검사 다시 실시 | **교대 스케줄 마스터 필요** (현재 미구현) |
| **N개 생산마다 재실시** | 1,000개 생산할 때마다 중간 샘플검사 | **생산 카운터 연동 필요**. N값을 기준정보로 관리 |
| **금형(소모품) 교체 시 재실시** | 소모품 교체 후 반드시 샘플검사 재실시 | **소모품 교체 이벤트와 샘플검사 연동 필요** |

- [ ] 작업지시 시작 시 1회
- [ ] 교대마다 재실시
- [ ] N개 생산마다 → N = ___개
- [ ] 금형 교체 시 재실시
- [ ] 복합 (예: 작업지시 시작 + 금형 교체 시): _______________

#### Q3-5-2. 샘플검사 항목은?

| 항목 | 선택 시 사전요구사항 |
|------|-------------------|
| **배럴 검사 + 인장력 검사 둘 다 필수** | **배럴 측정 기준값/인장력 기준값이 품목별로 정의**되어 있어야 함. 현재 어디에 관리되는지? |
| **모델/공정에 따라 검사 항목이 다름** | **검사항목 마스터에 "어떤 공정의 어떤 품목에 어떤 샘플검사가 필요한지" 매핑 필요** |

- [ ] 둘 다 필수
- [ ] 모델/공정에 따라 다름 → 기준정보 관리 필요
- [ ] 기타: _______________

#### Q3-5-3. 배럴/인장력 기준값은 어디서 가져오는가?

| 출처 | 선택 시 사전요구사항 |
|------|-------------------|
| **품목마스터에 필드 추가** | 품목마스터에 barrelMin, barrelMax, tensileMin, tensileMax 등 추가 |
| **별도 검사기준 마스터** | 품목 + 공정 + 단자 조합별 기준값 테이블 신규 생성 |
| **공정 파라미터(ProcessMap.processParams)에 포함** | 현재 processParams JSON에 추가 가능 (이미 와이어 길이 등 저장 중) |

- [ ] 품목마스터에 필드 추가
- [ ] 별도 검사기준 마스터
- [ ] 공정 파라미터에 포함
- [ ] 기타: _______________

---

### 3-6. IQC 미실시 (자재입고 인터락)

> **현재 구현 상태**: 품목마스터에 `iqcYn` 필드 존재. IQC 검사 기록(IqcLog) 관리 중

#### Q3-6-1. IQC 불합격 자재의 처리는?

| 처리 | 예시 | 선택 시 사전요구사항 |
|------|------|-------------------|
| **입고 자체 차단** | IQC FAIL → 입고 등록 불가 → 반품 또는 폐기 | 없음 (현재 입고 프로세스에 검증 추가) |
| **입고 허용, 불출 차단** | IQC FAIL → 불량 상태로 입고 → 불출 시도 시 차단 | **자재 LOT에 "IQC 상태" 필드 필요** (PASS/FAIL/PENDING). **불출 API에서 상태 체크 로직 추가** |
| **별도 불량 창고로 입고** | IQC FAIL → 자동으로 "불량자재 창고"에 적치 | **불량자재 전용 창고를 창고마스터에 등록** 필요. **입고 시 자동 창고 분기 로직** |

- [ ] 입고 자체 차단
- [ ] 입고 허용, 불출 차단
- [ ] 별도 불량 창고로 입고
- [ ] 기타: _______________

---

### 3-7. 마스터 샘플 검사 (통합검사 인터락)

> **관련 공정**: 통합검사
> **현재 구현 상태**: 통합검사 전용 프로세스 미구현

#### Q3-7-1. 마스터 샘플 검사란?

| 정의 | 선택 시 사전요구사항 |
|------|-------------------|
| **양품 1개 + 불량 1개를 먼저 검사** → 장비가 양품을 PASS, 불량을 FAIL로 정확히 판별하는지 확인 | **양품/불량 마스터 샘플을 품목별로 관리하는 체계 필요**. 마스터 샘플 번호 등록/관리 화면 필요. **검사장비에서 결과 데이터를 MES로 전송**하는 인터페이스 필요 |
| 기타: _______________ | |

#### Q3-7-2. 마스터 샘플 검사의 유효 범위는?

| 범위 | 선택 시 사전요구사항 |
|------|-------------------|
| **작업지시 시작 시 1회** | 작업지시-마스터샘플검사 연결 테이블 필요 |
| **매 교대 시작 시** | **교대 스케줄 마스터 필요** (현재 미구현) |
| **설비 전원 ON 시마다** | **설비 전원 ON/OFF 이벤트를 MES가 감지**할 수 있어야 함 → 설비 통신 연동 필요 |

- [ ] 작업지시 시작 시 1회
- [ ] 매 교대 시작 시
- [ ] 설비 전원 ON 시마다
- [ ] 기타: _______________

---

### 3-8. 제품 혼입 (제품포장 인터락)

> **관련 공정**: 제품포장
> **현재 구현 상태**: BoxService에서 박스 생성/시리얼 추가 기능 구현됨

#### Q3-8-1. "제품 혼입 방지"의 범위는?

| 범위 | 예시 | 선택 시 사전요구사항 |
|------|------|-------------------|
| **품번 혼입 방지** | 박스에 "HARNESS-A"와 "HARNESS-B"가 섞이면 차단 | **박스에 제품 추가 시 기존 제품의 품번과 비교하는 로직** 필요 |
| **작업지시 혼입 방지** | 같은 품번이라도 작업지시 JO-001과 JO-002 제품이 섞이면 차단 | 위 + **작업지시 단위 관리**, 박스에 작업지시ID 연결 |
| **LOT 혼입 방지** | 같은 품번, 같은 작업지시라도 생산 LOT가 다르면 차단 | 위 + **LOT 단위 관리** |

- [ ] 품번 혼입 방지만
- [ ] 품번 + 작업지시 혼입 방지
- [ ] 품번 + 작업지시 + LOT 혼입 방지
- [ ] 기타: _______________

#### Q3-8-2. 포장 시 제품 확인 방법은?

| 방법 | 선택 시 사전요구사항 |
|------|-------------------|
| **제품 바코드 스캔** | 완성품에 바코드 라벨이 부착되어 있어야 함. 포장 PC에 스캐너 필요 |
| **수량만 입력** | 혼입 방지 불가 (수량만으로는 어떤 제품인지 모름) |
| **작업지시 단위 일괄 포장** | 작업지시 선택 → 해당 작업지시의 완성품만 자동으로 박스에 할당 |

- [ ] 제품 바코드 스캔
- [ ] 수량만 입력
- [ ] 작업지시 단위 일괄 포장
- [ ] 기타: _______________

---

### 3-9. 유효기간 만료자재 (자재불출 인터락)

> **현재 구현 상태**: ShelfLife(유효기한) 관리 모듈 존재. MatLot에 유효기한 정보 저장

#### Q3-9-1. 유효기한 임박 자재의 처리는?

| 처리 | 예시 | 선택 시 사전요구사항 |
|------|------|-------------------|
| **만료 자재만 차단** | 유효기한이 지난 자재만 불출 차단 | 없음 (현재 ShelfLife 데이터로 판단 가능) |
| **N일 전부터 경고** | 유효기한 30일 전부터 "유효기한 임박" 경고 표시 | **N일 기준값 설정 필요** (품목별? 전체 공통?) |
| **수명연장 검사 후 허용** | 유효기한 만료 → 수명연장 검사(기타출고) 합격 → 재사용 허용 | **수명연장 검사 프로세스 정의 필요**, 검사 결과에 따른 유효기한 연장 로직 |

- [ ] 만료 자재만 차단
- [ ] N일 전부터 경고 → N = ___일
- [ ] 수명연장 검사 후 허용
- [ ] 기타: _______________

---

## 4. 설비 연동

### Q4-1. 인터락 시 설비에 물리적 신호를 보내는가?

| 방식 | 동작 설명 | 선택 시 사전요구사항 |
|------|----------|-------------------|
| **MES 소프트웨어 차단만** | MES 화면에서만 작업 차단. 작업자가 MES를 거치지 않고 설비 버튼을 직접 누르면 가동 가능 | 없음 |
| **MES → 설비 가동허가 신호 전송** | MES에서 인터락 체크 통과 후 설비에 "가동허가" 신호 전송. 인터락 미통과 시 신호 미전송으로 설비 물리적 차단 | **설비 업체와 통신 프로토콜 협의 완료 필요**, **설비 측에서 MES 가동허가 신호를 수신하고 이를 가동 조건으로 사용하도록 PLC 프로그램 수정 필요**, **통신 테스트 환경 구축** |

- [ ] MES 소프트웨어 차단만
- [ ] MES → 설비 가동허가 신호 전송
- [ ] 1차는 소프트웨어만, 2차에서 설비 연동 추가
- [ ] 기타: _______________

### Q4-2. 설비 연동 시 통신 프로토콜 (Q4-1에서 설비 연동 선택 시)

| 프로토콜 | 선택 시 사전요구사항 |
|---------|-------------------|
| **TCP/IP** | 설비 IP 주소, 포트 번호, 통신 포맷(바이트/JSON 등) 확정 필요 |
| **Serial (RS-232/485)** | 시리얼 포트 할당, 보드레이트 등 설정, PC-설비 간 케이블 연결 |
| **MQTT** | MQTT 브로커 서버 구축/선정 필요, 토픽 구조 설계 |
| **OPC-UA** | OPC-UA 서버 라이선스, 설비 OPC-UA 지원 여부 확인 |
| **미확정** | 설비 업체와 사전 협의 일정 수립 필요 |

- [ ] TCP/IP
- [ ] Serial
- [ ] MQTT
- [ ] OPC-UA
- [ ] 미확정 → 설비 업체 협의 예정일: _______________

---

## 5. 인터락 이력 관리

### Q5-1. 인터락 발생/해제 이력을 별도 저장하는가?

| 방식 | 저장 내용 예시 | 선택 시 사전요구사항 |
|------|-------------|-------------------|
| **별도 이력 테이블** | 발생시각, 인터락유형, 설비코드, 공정, 작업자, 해제시각, 해제방법(자동해제/관리자승인), 승인자, 사유 | **INTERLOCK_LOG 테이블 신규 생성**, **이력 조회 API 개발** |
| **기존 로그 테이블 활용** | 시스템 로그에 인터락 이벤트를 기록하는 수준 | 없음 |
| **저장 불필요** | 인터락은 실시간 차단만 하고 이력은 남기지 않음 | 없음 |

- [ ] 별도 이력 테이블
- [ ] 기존 로그 테이블 활용
- [ ] 저장 불필요
- [ ] 기타: _______________

### Q5-2. 인터락 이력 조회 화면이 필요한가?

| 방식 | 선택 시 사전요구사항 |
|------|-------------------|
| **관리자 전용 화면** | 인터락 이력 조회 페이지 개발 (필터: 기간, 설비, 인터락유형, 작업자) |
| **모니터링 대시보드에 통합** | 대시보드에 인터락 발생 건수/추이 위젯 추가 |
| **불필요** | 없음 |

- [ ] 관리자 전용 화면
- [ ] 모니터링 대시보드에 통합
- [ ] 불필요

### Q5-3. 인터락 발생 시 관리자 알림이 필요한가?

| 방식 | 선택 시 사전요구사항 |
|------|-------------------|
| **모니터링 화면에 실시간 표시** | 모니터링 페이지에 인터락 발생 알림 영역 추가. WebSocket 또는 폴링 |
| **소리/경고음** | 관리자 PC에서 경고음 재생. **브라우저 알림 권한 필요** |
| **불필요** | 없음 |

- [ ] 모니터링 화면에 실시간 표시
- [ ] 소리/경고음
- [ ] 불필요
- [ ] 기타: _______________

---

## 6. 인터락 설정 관리

### Q6-1. 인터락 ON/OFF를 관리자 화면에서 설정 가능하게 할 것인가?

| 방식 | 예시 | 선택 시 사전요구사항 |
|------|------|-------------------|
| **화면에서 설정** | 관리자 메뉴 > 인터락 설정 > 공정별/설비별 인터락 항목 체크박스 ON/OFF | **인터락 설정 마스터 테이블 신규 생성**, **인터락 설정 관리 페이지 개발** |
| **코드 고정** | 인터락 조건은 소스코드에 하드코딩. 변경 시 개발자가 수정 후 배포 | 없음 |

- [ ] 화면에서 설정 가능
- [ ] 코드 고정
- [ ] 기타: _______________

### Q6-2. 인터락 임계값을 화면에서 변경 가능하게 할 것인가?

> **예시**: 소모품 사용횟수 제한 10,000 → 12,000 변경, WARNING 임계 비율 80% → 70% 변경

| 방식 | 선택 시 사전요구사항 |
|------|-------------------|
| **화면에서 변경** | 인터락 설정 화면에 임계값 입력 필드 추가 |
| **마스터 데이터에서 변경** | 소모품마스터의 expectedLife 등 기존 마스터 화면에서 수정 (현재 가능) |

- [ ] 화면에서 변경
- [ ] 마스터 데이터에서 변경 (현재 방식 유지)
- [ ] 기타: _______________

---

## 7. 개발 우선순위

### Q7-1. 1차 오픈 시점에 반드시 필요한 인터락은? (해당 항목 체크)

| 인터락 | 1차 필수 | 2차 이후 | 불필요 |
|--------|---------|---------|-------|
| 설비 일상점검 미실시 | [ ] | [ ] | [ ] |
| 설비부품 사용제한 횟수 초과 | [ ] | [ ] | [ ] |
| 자재 미일치 | [ ] | [ ] | [ ] |
| 공정순서 미일치 | [ ] | [ ] | [ ] |
| 샘플검사 양품조건 미충족 | [ ] | [ ] | [ ] |
| IQC 미실시 | [ ] | [ ] | [ ] |
| 마스터 샘플 검사 미충족 | [ ] | [ ] | [ ] |
| 제품 혼입 | [ ] | [ ] | [ ] |
| 유효기간 만료자재 | [ ] | [ ] | [ ] |

### Q7-2. 1차 오픈 목표 시점은?

- 기재: _______________ (예: 2026년 N월)

---

## 8. 종합: 선택에 따른 사전요구사항 요약

> 아래는 주요 선택에 따라 **사전에 준비/확정해야 할 항목**을 정리한 것입니다.

| 선택 사항 | 사전요구사항 | 담당/협의 대상 |
|----------|------------|-------------|
| Soft Block 적용 시 | 승인 권한 역할 정의, 승인 UI 설계 | 프로젝트 관리자 |
| 교대(Shift) 기준 적용 시 | 교대 스케줄 마스터 정의 (조, 시작/종료 시각) | 생산관리 담당자 |
| 바코드 스캔 방식 적용 시 | 각 PC에 바코드 스캐너 설치, 모든 자재/제품에 바코드 라벨 부착 | 현장 관리자, IT 인프라 |
| 설비 물리 연동 시 | 설비 업체와 통신 프로토콜 협의, PLC 프로그램 수정 | 설비 업체 |
| 샘플검사 기준값 관리 시 | 품목별 배럴/인장력 기준값 데이터 정리 | 품질관리 담당자 |
| 마스터 샘플 관리 시 | 양품/불량 마스터 샘플 목록, 보관/관리 체계 수립 | 품질관리 담당자 |
| 인터락 이력 관리 시 | INTERLOCK_LOG 테이블 설계, 보관 기간 정책 | DBA, 프로젝트 관리자 |
| 인터락 설정 화면 시 | 인터락 설정 마스터 테이블 설계, 관리 페이지 개발 | 개발팀 |
| 소모품 교체 QR 방식 시 | 소모품 QR 코드 발행/부착, 현장 교체 등록 화면 | 현장 관리자, 개발팀 |
